<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
 <div>
  <form action="">
    <script src="https://checkout.flutterwave.com/v3.js"></script>
    <input type="tel"  id="Customer_Name" value=" <%=Customer_Number %>">
    <input type="text" name="Customer_Type" id="Customer_Type" value=" <%=Customer_Type %>">
    <input type="text" name="serviceID"  id="serviceID" value=" <%=serviceID %>" hidden>
    <select name="variation_code" id="variation_code">
      <option value="dstv-padi">DStv Padi N1,850 </option>
      <option value="dstv-yanga">DStv Yanga N2,565 </option>
      <option value="dstv-confam">Dstv Confam N4,615 </option>
    </select>
    <input type="tel" name="phone" id="phone" placeholder="phone number please :)">
    <input type="email" name="email" id="email" placeholder="email here please :)">
    <button type="button" onClick="makePayment()">Buy <%= Customer_Type %> subscription</button>
  </form>
 </div>
</body>
</html>
<script>
  function makePayment() {
    const phone_number = document.getElementById('phone').value
    const email = document.getElementById('email').value
    const name = document.getElementById('Customer_Name').value
    const sel = document.getElementById('network')
    const sel_value = sel.value
    const selected = sel.options[sel.selectedIndex];
    const selected_value = selected.text
    const variation_code =  selected.getAttribute('variation_code');
    const service_id = document.getElementById('operators').value
    FlutterwaveCheckout({
      public_key: "FLWPUBK_TEST-8e6858868683e5fb3e1eda62f8b77765-X",
      tx_ref: Date.now(),
      amount:sel_value,
      currency: "NGN",
      country: "NG",
      payment_options: "card",
      redirect_url: "http://localhost:5000/data/approved",
      meta: {
    variation_code,
    selected_value,
    service_id
  },
      customer: {
        email,
        phone_number,
        name,
      },
      callback: function (data) {
        console.log(data);
      },
      onclose: function () {
        // close modal
      },
      customizations: {
        title: "Pay for your Airtime Here",
        description: "Airtime Payment",
        logo: "https://cdn.iconscout.com/icon/premium/png-256-thumb/payment-2193968-1855546.png",
      },
    });
  }
</script>